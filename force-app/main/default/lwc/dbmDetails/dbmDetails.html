<template>
    <!-- <p class="slds-text-heading_medium">Report Details</p> -->
    <lightning-input label="Enter Report Name" name="reportName" value={reportDetails.reportName} required
        onchange={handleReportDetailChange}>
    </lightning-input>
    <div class="metricContainer slds-grid slds-gutters">
        <div class="slds-col slds-size_1-of-2">
            <lightning-input label="Enter Metric Name" name="metricName" value={reportDetails.metricName}
                onchange={handleReportDetailChange}>
            </lightning-input>
        </div>
        <div class="slds-col slds-size_1-of-2">
            <lightning-combobox label="Select Metric Type" name="metricType" options={metricTypes.options}
                value={reportDetails.metricType} onchange={handleReportDetailChange}></lightning-combobox>
        </div>
    </div>

    <form class="numGroupingsContainer">
        <label class="slds-form-element__label">
            How many grouping levels do you want in this chart, one or two? </label>
        <lightning-radio-group label="Number of Groupings" name="numGroupings" value={reportDetails.numGroupings}
            type="button" options={numGroupingsOptions} variant="label-hidden"
            onchange={handleReportDetailChange}></lightning-radio-group>
        <div class="slds-grid slds-gutters">
            <template for:each={reportDetails.groupings} for:item="grouping" for:index="index">
                <div class="slds-col slds-size_1-of-2" key={grouping.index} data-is-disabled={grouping.isDisabled}>
                    <lightning-input label={grouping.inputLabel} data-grouping={grouping.groupingName}
                        data-index={index} name="name" value={grouping.name} disabled={grouping.isDisabled}
                        onchange={handleGroupingDetailChange} required></lightning-input>
                    <!-- <lightning-combobox label="Select Data Source" data-grouping={grouping.groupingName}
                                options={dataSourceOptions} name="dataSource" value={grouping.dataSource}
                                disabled={grouping.isDisabled} onchange={handleGroupingDetailChange}
                                field-level-help="Your grouping entries can come from multiple data sources, from simply entering them by hand to pulling user names, picklist option sets, and more. You'll customize your grouping entries on the next screen."
                                required></lightning-combobox> -->
                    <c-fsc_combobox label="Select Data Source" data-grouping={grouping.groupingName} data-index={index}
                        options={dataSourceOptions} name="dataSource" value={grouping.dataSource}
                        disabled={grouping.isDisabled} onchange={handleGroupingDetailChange}
                        field-level-help="Your grouping entries can come from multiple data sources, from simply entering them by hand to pulling user names, picklist option sets, and more. You'll customize your grouping entries on the next screen."
                        required prevent-clear-intercept={preventDataSourceClear}></c-fsc_combobox>

                    <template lwc:if={grouping.dataSourceIs.sobject}>
                        <c-fsc_object-field-selector field-label="Which Field Do You Want to Display?"
                            data-index={index} data-grouping={grouping.groupingName} field-value={grouping.fieldName}
                            object-value={grouping.objectName} default-to-name-field required
                            disabled={grouping.isDisabled}
                            onchange={handleGroupingObjectFieldChange}></c-fsc_object-field-selector>
                    </template>
                    <template lwc:if={grouping.dataSourceIs.picklist}>
                        <c-fsc_object-field-selector object-label="Select Object to Pull Picklist Values From"
                            data-index={index} data-grouping={grouping.groupingName} field-label="Select Picklist Field"
                            available-field-types="Picklist" field-value={grouping.fieldName}
                            object-value={grouping.objectName} required disabled={grouping.isDisabled}
                            onchange={handleGroupingObjectFieldChange}></c-fsc_object-field-selector>
                    </template>
                </div>
            </template>
        </div>
    </form>
    {reportDetailsString}
</template>